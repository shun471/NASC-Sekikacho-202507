(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3272:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var o=r(9605),l=r(9585);function a(e){let{remaining:t}=e,r=Math.floor(t/60);return(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-white mb-3 drop-shadow-lg",children:"⏰ システム残り時間 ⏰"}),(0,o.jsx)("div",{className:"inline-block p-4 rounded-xl border-3 ".concat(t<=600?"bg-red-900/50 border-red-500":t<=1800?"bg-yellow-900/50 border-yellow-500":"bg-green-900/50 border-green-500"," shadow-xl"),children:(0,o.jsx)("div",{className:"text-4xl font-mono font-bold ".concat(t<=600?"text-red-500 animate-pulse":t<=1800?"text-yellow-500":"text-green-400"," drop-shadow-lg"),children:"".concat(r,":").concat((t%60).toString().padStart(2,"0"))})}),t<=600&&(0,o.jsx)("div",{className:"mt-3 p-2 bg-red-600 text-white rounded-lg font-bold animate-pulse text-sm",children:"⚠️ 危険！！ 時間がなくなりそう！！⚠️"}),t<=1800&&t>600&&(0,o.jsx)("div",{className:"mt-3 p-2 bg-yellow-600 text-white rounded-lg font-bold text-sm",children:"⚡ すこし残り時間が少なくなってきた！ ⚡"}),t>1800&&(0,o.jsx)("div",{className:"mt-3 p-2 bg-green-600 text-white rounded-lg font-bold text-sm",children:"\uD83C\uDFAF まだ時間があります！落ち着いて行動しよう！ \uD83C\uDFAF"})]})}function s(e){let{disabled:t=!0,onUnlock:r}=e,[a,s]=(0,l.useState)(""),[d,n]=(0,l.useState)(!1),i=async()=>{if(t||d||4!==a.length)return;let e=await fetch("".concat("192.168.10.113:3000","/api/unlock"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:a})}),{result:o}=await e.json();"success"===o?(n(!0),r&&r()):(alert("❌ コードが違います！もう一度試してください！ ❌"),s(""))},c=e=>{t||d||a.length>=4||s(t=>t+e)};return d?(0,o.jsx)("div",{className:"text-center",children:(0,o.jsxs)("div",{className:"p-4 bg-gradient-to-r from-green-500 to-green-600 border-3 border-green-400 text-white rounded-xl font-bold text-lg animate-pulse shadow-xl",children:[(0,o.jsx)("div",{className:"text-3xl mb-2",children:"\uD83C\uDF89"}),(0,o.jsx)("h2",{className:"text-xl mb-2",children:"✅ 解除完了！"}),(0,o.jsx)("p",{className:"text-base",children:"爆弾が正常に解除されました！"}),(0,o.jsx)("p",{className:"text-sm mt-2",children:"おめでとうございます！"})]})}):(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-white mb-3 drop-shadow-lg",children:"\uD83D\uDD10 解除コードを入力 \uD83D\uDD10"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"bg-gray-800 p-3 rounded-lg border-2 border-gray-600",children:[(0,o.jsx)("div",{className:"text-2xl font-mono text-white mb-2",children:a.padEnd(4,"•").split("").map((e,t)=>(0,o.jsx)("span",{className:"inline-block w-10 h-10 mx-1 border-2 rounded-lg flex items-center justify-center ".concat("•"===e?"border-gray-600 text-gray-600":"border-green-500 text-green-400"),children:e},t))}),(0,o.jsxs)("div",{className:"text-xs text-gray-400",children:[a.length,"/4 文字入力済み"]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-2 max-w-xs mx-auto",children:[[1,2,3,4,5,6,7,8,9].map(e=>(0,o.jsx)("button",{onClick:()=>c(e.toString()),disabled:t||d||a.length>=4,className:"w-12 h-12 text-lg font-bold rounded-lg transition-all duration-200 transform hover:scale-105 shadow-lg border-2 ".concat(t||d||a.length>=4?"bg-gray-600 text-gray-400 border-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-blue-700 text-white border-blue-500 hover:from-blue-700 hover:to-blue-800"),children:e},e)),(0,o.jsx)("button",{onClick:()=>{t||d||s("")},disabled:t||d,className:"w-12 h-12 text-sm font-bold rounded-lg transition-all duration-200 transform hover:scale-105 shadow-lg border-2 ".concat(t||d?"bg-gray-600 text-gray-400 border-gray-500 cursor-not-allowed":"bg-gradient-to-r from-red-600 to-red-700 text-white border-red-500 hover:from-red-700 hover:to-red-800"),children:"C"}),(0,o.jsx)("button",{onClick:()=>c("0"),disabled:t||d||a.length>=4,className:"w-12 h-12 text-lg font-bold rounded-lg transition-all duration-200 transform hover:scale-105 shadow-lg border-2 ".concat(t||d||a.length>=4?"bg-gray-600 text-gray-400 border-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-blue-700 text-white border-blue-500 hover:from-blue-700 hover:to-blue-800"),children:"0"}),(0,o.jsx)("button",{onClick:()=>{t||d||s(e=>e.slice(0,-1))},disabled:t||d||0===a.length,className:"w-12 h-12 text-sm font-bold rounded-lg transition-all duration-200 transform hover:scale-105 shadow-lg border-2 ".concat(t||d||0===a.length?"bg-gray-600 text-gray-400 border-gray-500 cursor-not-allowed":"bg-gradient-to-r from-yellow-600 to-yellow-700 text-white border-yellow-500 hover:from-yellow-700 hover:to-yellow-800"),children:"←"})]}),(0,o.jsx)("button",{onClick:i,disabled:t||d||4!==a.length,className:"w-full py-3 px-4 rounded-lg text-base font-bold transition-all duration-200 transform hover:scale-105 shadow-lg border-2 ".concat(t||d||4!==a.length?"bg-gray-600 text-gray-400 cursor-not-allowed border-2 border-gray-500":"bg-gradient-to-r from-green-600 to-green-700 text-white hover:from-green-700 hover:to-green-800 border-2 border-green-500"),children:t?"\uD83D\uDD12 入力できません":4!==a.length?"4桁入力してください":"\uD83D\uDE80 コード送信 \uD83D\uDE80"})]}),t&&(0,o.jsx)("div",{className:"mt-3 p-2 bg-gradient-to-r from-yellow-600 to-yellow-700 border-2 border-yellow-400 text-white rounded-lg font-bold text-sm",children:"⚠️ 導通を検知するまでコード入力は無効です ⚠️"}),!t&&(0,o.jsx)("div",{className:"mt-3 p-2 bg-gradient-to-r from-blue-600 to-blue-700 border-2 border-blue-400 text-white rounded-lg font-bold text-sm",children:"✅ コード入力が有効です！4桁の数字を入力してください ✅"})]})}function d(){let[e,t]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),[n,i]=(0,l.useState)(!1),[c,g]=(0,l.useState)(!1),[x,b]=(0,l.useState)(!1),m=(0,l.useRef)(null);return((0,l.useEffect)(()=>{let e=new WebSocket("192.168.10.113:3000");return m.current=e,e.onopen=()=>{console.log("WebSocket接続が確立されました")},e.onmessage=e=>{let r=JSON.parse(e.data);console.log("受信データ:",r),"game_state"===r.event&&(t(r.remaining),d(r.isActive),i(r.isCircuitLive)),void 0===r.remaining||"game_state"===r.event||c||t(r.remaining),"game_started"===r.event&&(d(!0),i(!1),g(!1),b(!1),console.log("ゲームが開始されました")),"circuit_live"===r.event&&(i(!0),console.log("導通が検知されました - コード入力が有効になりました")),"circuit_dead"===r.event&&(i(!1),console.log("導通が切れました - コード入力が無効になりました")),"timeout"===r.event&&(console.log("タイマーが終了しました"),t(0),d(!1),i(!1),g(!1),b(!0),alert("\uD83D\uDCA5 時間切れです！爆弾が爆発しました！\uD83D\uDCA5")),"unlocked"===r.event&&(console.log("解除されました！"),g(!0),alert("\uD83C\uDF89 爆弾が解除されました！おめでとうございます！\uD83C\uDF89"))},e.onerror=e=>{console.error("WebSocketエラー:",e)},e.onclose=()=>{console.log("WebSocket接続が閉じられました")},()=>{m.current&&m.current.close()}},[c]),x)?(0,o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-red-800 to-black flex items-center justify-center p-4",children:(0,o.jsx)("div",{className:"text-center",children:(0,o.jsxs)("div",{className:"bg-gradient-to-b from-gray-800 to-gray-900 rounded-3xl p-12 shadow-2xl border-4 border-red-600 max-w-2xl",children:[(0,o.jsx)("div",{className:"text-8xl mb-6 animate-pulse",children:"\uD83D\uDCA5"}),(0,o.jsx)("h1",{className:"text-5xl font-bold text-red-500 mb-4 drop-shadow-lg",children:"GAME OVER"}),(0,o.jsx)("p",{className:"text-2xl text-white mb-8",children:"時間切れです！爆弾が爆発しました！"}),(0,o.jsxs)("div",{className:"text-gray-300 text-lg mb-8",children:[(0,o.jsx)("p",{children:"残り時間: 0:00"}),(0,o.jsx)("p",{children:"システムが停止しました"})]}),(0,o.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-red-600 to-red-700 text-white px-8 py-4 rounded-full text-xl font-bold hover:from-red-700 hover:to-red-800 transform hover:scale-105 transition-all duration-200 shadow-lg border-2 border-red-500",children:"\uD83D\uDD04 リトライ \uD83D\uDD04"})]})})}):(0,o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-red-800 to-black flex items-center justify-center p-4",children:(0,o.jsx)("div",{className:"w-full max-w-6xl",children:(0,o.jsxs)("div",{className:"bg-gradient-to-b from-gray-800 to-gray-900 rounded-3xl p-8 shadow-2xl border-4 border-red-600 relative overflow-hidden",children:[(0,o.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-16 h-8 bg-red-600 rounded-b-full"}),(0,o.jsxs)("div",{className:"text-center mb-8",children:[(0,o.jsx)("h1",{className:"text-4xl font-bold text-red-500 mb-2 drop-shadow-lg",children:"\uD83C\uDFAE 爆弾コントロールパネル \uD83C\uDFAE"}),(0,o.jsx)("p",{className:"text-gray-300 text-lg",children:"システムが自動で開始されました。時間内に正しいコードを入力してください！"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,o.jsxs)("div",{className:"space-y-6",children:[r&&(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)("button",{onClick:()=>{m.current&&m.current.send(JSON.stringify({cmd:"stop"}))},className:"bg-gradient-to-r from-gray-600 to-gray-700 text-white px-6 py-3 rounded-full text-lg font-bold hover:from-gray-700 hover:to-gray-800 transform hover:scale-105 transition-all duration-200 shadow-lg border-2 border-gray-500",children:"⏹️ システム停止 ⏹️"})}),null!==e&&(0,o.jsxs)("div",{children:[(0,o.jsx)(a,{remaining:e}),c&&(0,o.jsx)("div",{className:"mt-4 p-4 bg-gradient-to-r from-green-500 to-green-600 border-2 border-green-400 text-white rounded-xl font-bold text-lg animate-pulse",children:"✅ 解除成功！残り時間で固定されています"})]}),n&&!c&&(0,o.jsx)("div",{className:"p-4 bg-gradient-to-r from-green-500 to-green-600 border-2 border-green-400 text-white rounded-xl font-bold text-lg animate-pulse",children:"⚡ 導通が検知されました！コード入力が有効です ⚡"}),(0,o.jsx)("div",{className:"text-center text-gray-400 text-sm",children:(0,o.jsx)("p",{children:"\uD83D\uDCA1 ヒント: 導通が検知されるまでコード入力はできません"})})]}),(0,o.jsx)("div",{className:"bg-gray-700 rounded-2xl p-6 border-2 border-gray-600",children:(0,o.jsx)(s,{disabled:!n||c,onUnlock:()=>g(!0)})})]}),(0,o.jsx)("div",{className:"absolute top-4 right-4 w-4 h-4 bg-red-500 rounded-full animate-pulse"}),(0,o.jsx)("div",{className:"absolute bottom-4 left-4 w-3 h-3 bg-yellow-500 rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),(0,o.jsx)("div",{className:"absolute top-1/2 right-6 w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"1s"}})]})})})}},7874:(e,t,r)=>{Promise.resolve().then(r.bind(r,3272))}},e=>{var t=t=>e(e.s=t);e.O(0,[390,110,358],()=>t(7874)),_N_E=e.O()}]);